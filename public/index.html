<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>FastEats</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body { font-family: Arial, sans-serif; padding: 16px; }
      header { display:flex; align-items:center; gap:12px; }
      img.logo { max-width:120px; }
      .item { border-bottom:1px solid #ddd; padding:10px 0; }
      button { padding:6px 12px; cursor:pointer; }
    </style>
  </head>
  <body>
    <div id="app">Загрузка...</div>

    <script>
      async function init(){
        const res = await fetch('/catalog.json');
        const catalog = await res.json();
        const app = document.getElementById('app');
        app.innerHTML = '';
        const header = document.createElement('header');
        const img = document.createElement('img'); img.className='logo'; img.src=catalog.meta.logoUrl || '';
        header.appendChild(img);
        const h1 = document.createElement('h1'); h1.innerText = catalog.meta.name;
        header.appendChild(h1);
        app.appendChild(header);

        const list = document.createElement('div');
        catalog.items.forEach(i=>{
          const el = document.createElement('div'); el.className='item';
          el.innerHTML = <h3>${i.name} — $${i.price}</h3><p>${i.desc}</p>;
          const btn = document.createElement('button'); btn.innerText='Добавить в корзину';
          btn.onclick = ()=> addToCart(i);
          el.appendChild(btn);
          list.appendChild(el);
        });
        app.appendChild(list);

        const cartDiv = document.createElement('div'); cartDiv.id='cart'; cartDiv.style.marginTop='12px';
        app.appendChild(cartDiv);
        window.cart = [];
        window.addToCart = (item)=>{
          window.cart.push(item);
          document.getElementById('cart').innerText = 'В корзине: ' + window.cart.map(x=>x.name).join(', ');
        };
      }
      init().catch(e=>document.getElementById('app').innerText='Ошибка: '+e.message);
    </script>
  </body>
</html>
